# ADISE23_Stratego

Url: https://users.iee.ihu.gr/~it175128/ADISE23_Stratego/STRATEGO/views/login.php

## Περιγραφή Παιχνιδιού

### Το stratego παίζεται ως εξής: 

 Το STRATEGO είναι ένα κλασικό επιτραπέζιο παιχνίδι στρατηγικής για δύο παίχτες! 
Κάθε παίχτης ορίζει τον στρατό του που αποτελείται από 40 πιόνια, 
καθένα από τα οποία αντιπροσωπεύει συγκεκριμένη βαθμίδα αξιωματικών και στρατιωτών.
Πρέπει να προσπαθήσετε να αιχμαλωτίσετε τη Σημαία του αντιπάλου καθώς προστατεύετε τη δική σας. 
 Πρώτα δημιουργείτε ένα μυστικό σχηματισμό τοποθετώντας τα πιόνια σας στο δικό σας πεδίο με τέτοιο τρόπο, 
ώστε ο αντίπαλος να βλέπει το πίσω μέρος των πιονιών. 
Τα νούμερα των πιονιών καθορίζουν το βαθμό τους. 
Όσο μεγαλύτερος είναι ο αριθμός τόσο υψηλότερος είναι ο βαθμός. 
Αν ένα πιόνι υψηλότερου βαθμού πάρει ένα πιόνι χαμηλότερου βαθμού, 
το πιόνι με τον υψηλότερο βαθμό κερδίζει και το άλλο βγαίνει από το παιχνίδι. 
Η Σημαία μπορεί να κατακτηθεί από οποιοδήποτε πιόνι του αντιπάλου μπορεί να μετακινηθεί.

### Οι κανόνες είναι οι :
 Τα κόκκινα ξεκινούν ! Οι παίκτες μετακινούν τα πιόνια τους. Μετακινείτε ένα πιόνι σε μια άδεια θέση ή σε μια θέση που βρίσκεται ένα πιόνι του αντιπάλου. Η τελευταία κίνηση ονομάζεται επίθεση. Κάθε παίκτης δικαιούται να μετακινήσει ένα πιόνι σε κάθε γύρο.
Τα πιόνια μετακινούνται ένα τετράγωνο τη φορά μπροστά, πίσω, δεξιά ή αριστερά. Ο Ανιχνευτής εξαιρείται από αυτόν τον κανόνα, όπως εξαιρείται παρακάτω.
Μόνο ένα πιόνι μπορεί να υπάρχει σε κάθε τετράγωνο. Δεν υπάρχει διαγώνια κίνηση ούτε μπορείτε να πηδήξετε τετράγωνα. Δεν μπορείτε, επίσης, να εισέλθετε ή να διασχίσετε τις δύο λίμνες που υπάρχουν στη μέση του ταμπλό. 
Τα πιόνια μπορούν να μετακινούνται πίσω-μπρος μεταξύ δύο τετραγώνων μέχρι και 3 φορές. Αν ξεπεραστεί αυτός ο αριθμός, ο παίκτης που το έκανε δίνει τη θέση του στον αντίπαλο. 
Η Σημαία και οι Βόμβες δεν μετακινούνται ποτέ. 
Οι Ανιχνευτές (2) μπορούν να κινηθούν σε όσα ελεύθερα τετράγωνα θέλουν μπροστά, πίσω και πλαγίως (δεξιά και αριστερά). Δεν μπορούν όμως να πηδήξουν πάνω από τα πιόνια του δικού τους στρατού ή του στρατού του αντιπάλου. Δεν μπορούν να πηδήξουν πάνω από τις λίμνες. Είναι τα μοναδικά πιόνια που μπορούν να επιτεθούν από μεγάλη απόσταση. 
 Η επίθεση :
Εκτός από τη Σημαία ή τη Βόμβα, ένα πιόνι μπορεί να επιτεθεί σε πιόνι αντιπάλου που βρίσκεται ακριβώς μπροστά του, πίσω του, δεξιά ή αριστερά του. Το επιτιθέμενο πιόνι χτυπά ελαφρά το πιόνι του αντιπάλου και αποκαλύπτει το βαθμό του. Τότε, το αμυνόμενο πιόνι πρέπει να φανερώσει και αυτό το βαθμό του. Όποιο πιόνι έχει χαμηλότερο βαθμό χάνει και φεύγει από το παιχνίδι. Αν ο επιτιθέμενος κερδίσει, τότε παίρνει τη θέση του χαμένου πιονιού. Αν ο αμυνόμενος κερδίσει, δεν υπάρχει καμία κίνηση. Αν και τα δύο πιόνια είναι του ίδιου βαθμού, τότε βγαίνουν και τα δύο.
Ο Ανιχνευτής μπορεί να επιτεθεί από όποια απόσταση θέλει, αρκεί τα τετράγωνα μεταξύ αυτού και του αμυνόμενου πιονιού να είναι ελεύθερα (άδεια) και να κινείται σε ευθεία γραμμή. Ο Ανιχνευτής λοιπόν μπορεί να επιτεθεί σε μια Κατάσκοπο από μακρινή απόσταση.
Η επίθεση είναι πάντα προαιρετική !




Η βάση μας κρατάει τους εξής πίνακες και στοιχεία 

board, για το ταμπλό του παιχνιδιού
players, για τους παίκτες
pieces,για τα πιονια
game_status,για την κατασταση του παιχνιδιου
moves, για αποθηκευση της καθε κινησης
RemovedPiecesPool, για τα πιονια που εχουν βγει απο το παιχνίδι


Η εφαρμογή απαπτύχθηκε μέχρι το σημείο που μπορουν να παιξουν μεταξύ τους δυο παιχτες
υλοποιήσαμε register/login, dragNdrop στα pieces, ελέγχους στις κινήσεις, κατασταση παιχνιδιου
δεν προλάβαμε να υλοποιήσουμε: multiple game sessions, τις ειδικές κινήσεις του scout 
να συνεχίζεται το παιχνίδι αν καποιος κανει logout και επιστρέψει.

Συντελεστές
Περιγράψτε τις αρμοδιότητες της ομάδας.

Τούμπας Δημήτριος: Σχεδιασμός mysql database,PHP API,ajax

Λεοπάρντι Μάρκος Αντώνιος: PHP API, Javascript, ajax

Μιχαηλία Γάλλε: HTML, Javascript, PHP API, SQL

....

## Περιγραφή API

### Methods

#### Board
Ανάγνωση Board
GET /getData 
Επιστρέφει το Board.

Αρχικοποίηση Board
POST /save_board_state
Αρχικοποιεί το Board, δηλαδή το παιχνίδι. Γίνονται reset τα πάντα σε σχέση με το παιχνίδι. Επιστρέφει το Board.

Update Board
POST /UpdateBoard.php
Ενημερώνει το Board, δηλαδή το παιχνίδι. Γίνονται set τα pieces και οι θέσεις στο board.

#### Piece
Ανάγνωση Θέσης/Πιονιού
GET /board/piece/:x/:y/
Κάνει την κίνηση του πιονιού από την θέση x,y στην νέα θέση. Προφανώς ελέγχεται η κίνηση αν είναι νόμιμη καθώς και αν είναι η σειρά του παίκτη να παίξει με βάση το token. Επιστρέφει τα στοιχεία από το Board με συντεταγμένες x,y. Περιλαμβάνει το χρώμα του πιονιού και τον τύπο.

Μεταβολή Θέσης Πιονιού
PUT /board/piece/:x/:y/
Json Data:

Field	Description	Required
x	Η νέα θέση x	yes
y	Η νέα θέση y	yes
Επιστρέφει τα στοιχεία από το Board με συντεταγμένες x,y. Περιλαμβάνει το χρώμα του πιονιού και τον τύπο

#### Player
Ανάγνωση στοιχείων παίκτη
GET /players/:p
Επιστρέφει τα στοιχεία του παίκτη p ή όλων των παικτών αν παραληφθεί. Το p μπορεί να είναι 'B' ή 'W'.

Καθορισμός στοιχείων παίκτη
PUT /players/:p
Json Data:

Field	Description	Required
username	Το username για τον παίκτη p.	yes
color	To χρώμα που επέλεξε ο παίκτης p.	yes
Επιστρέφει τα στοιχεία του παίκτη p και ένα token. Το token πρέπει να το χρησιμοποιεί ο παίκτης καθόλη τη διάρκεια του παιχνιδιού.

#### Status
Ανάγνωση κατάστασης παιχνιδιού

GET /checkTurnChange/
Επιστρέφει το στοιχείο player_turn απο τον πίνακα game_status.

## Entities

### Board
Το board είναι ένας πίνακας, ο οποίος στο κάθε στοιχείο έχει τα παρακάτω:
 
Attribute | Description	| Values
|---------|-------------|----------|
position_x  | H συντεταγμένη x του τετραγώνου | 1..10 |
position_y	 | H συντεταγμένη y του τετραγώνου | 1..10 |
piece_color	| To χρώμα του πιονιού | 'R','B', null |
piece_id	| To Πιόνι που υπάρχει στο τετράγωνο |'1','2',...'9','10','11','12', null|

### Players

O κάθε παίκτης έχει τα παρακάτω στοιχεία:

Attribute | Description | Values |
|---------|-------------|----------|
player_id| To id του παίκτη.Αρχικοποιείται όταν κάποιος κάνει register | int auto increment |
player_name | To πραγματικο ονομα του παίκτη | String |
player_password | κωδικος για log in | String |
player_username | Όνομα παιχνιδιού του παίκτη | String |
piece_color| To χρώμα που παίζει ο παίκτης,το παίρνει όταν κάνει login | 'R','B' |
logged_in | flag για το log state|tiny Int|
ready_to_play | flag για το ready state(να εχει πατήσει το ready button) | tiny Int |

### Game_status
H κατάσταση παιχνιδιού έχει τα παρακάτω στοιχεία:

Attribute |	Description |	Values |
|---------|-------------|----------|
status | 	Κατάσταση	| 'inactive', 'initialized', 'started', 'ended', 'aborded'|
player_turn	| To χρώμα του παίκτη που παίζει	| 'B','W',null|
winner	| To χρώμα του παίκτη που κέρδισε |	'R','B',null |
last_change	| Τελευταία αλλαγή/ενέργεια στην κατάσταση του παιχνιδιού	| timestamp |

### empty_Board
To empty_board είναι ίδιο με το Board αλλά παραμένει άδειο και με την χρήση του procedure ResetBoard()
το Board γίνεται empty_board.

### RemovedPiecesPool
για τα πιόνια που βγήκαν από το παιχνίδι
Attribute |	Description |	Values |
|---------|-------------|----------|
piece_color	| To χρώμα του πιονιού | 'R','B', null |
piece_id	| Tα Πιόνια  |'1','2',...'9','10','11','12' |
piece_count | το πλήθος των πιονιών | int |

### pieces
τα πιόνια του παιχνιδιου
Attribute |	Description |	Values |
|---------|-------------|----------|
piece_id	| Tα Πιόνια  |'1','2',...'9','10','11','12', |
|piece_type | το ονομα του πιονιου | enum('Flag','Spy','Scout','Miner','Sergeant','Lieutenant','Captain','Major','Colonel','General','Marshal','Bomb') NOT NULL|
piece_rank	| το rank  | int |
piece_count | το πλήθος των πιονιών | int |


